{% extends 'base.html' %}
{% block title %}
    <title>密码修改</title>
{% endblock %}

{% block container %}
    <!--主体-->
    <form action="." method="post">
    {% csrf_token %}
    <header class="wy-header">
      <div class="wy-header-icon-back"><span></span></div>
      <div class="wy-header-title">密码修改</div>
    </header>
    <div class="weui-content">
      <div class="weui-cells weui-cells_form wy-address-edit">

        <div class="weui-cell">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">原密码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="password"
              name="old_password"
              placeholder="请输入原密码"
            />
          </div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">新密码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="password"
              name="new_password"
              placeholder="请输入新密码"
            />
          </div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">重复密码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="password"
              name="new_password_repeat"
              placeholder="请再次输入新密码"
            />
          </div>
        </div>
            <!--
        <div class="weui-cell weui-cell_vcode">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">手机号</label>
          </div>
          <div class="weui-cell__bd">
            <input class="weui-input" type="tel" placeholder="请输入手机号" />
          </div>

          <div class="weui-cell__ft">
            <button class="weui-vcode-btn">获取验证码</button>
          </div>
          -->
        </div>
        <div class="weui-cell weui-cell_vcode">
          <div class="weui-cell__hd">
            <label class="weui-label wy-lab">验证码</label>
          </div>
          <div class="weui-cell__bd">
            <input
              class="weui-input"
              type="text"
              name="verify_code"
              placeholder="请输入验证码"
              maxlength="4"
            />
          </div>
          <div class="weui-cell__ft">
            <img class="weui-vcode-img" src="{% url 'system:verify_code' %}"
            data-src="{% url 'system:verify_code' %}"/>
          </div>
        </div>
      </div>
        {#   错误信息展示区    #}
        {{ form.old_password.errors }}
        {% if not form.old_password.errors %}
           {{ form.non_field_errors }}
        {% endif %}
        {{ form.verify_code.errors }}
      <div class="weui-btn-area">
          <input type="submit" class="weui-btn weui-btn_primary" value="确认修改">
      </div>
    </div>
</form>
{% endblock %}
{% block footer %}
    <script>
        $('.weui-vcode-img').click(function () {
            $(this).attr('src',"{% url 'system:verify_code' %}"+'?t='+new Date().getTime() )
        })

    </script>
{% endblock %}



